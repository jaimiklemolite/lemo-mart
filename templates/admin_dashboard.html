<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard â€“ LemoMart</title>
  <link rel="stylesheet" href="/static/css/styles.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

{% include 'header.html' %}

<div class="body-content">
  <div class="admin-action">
    <button class="dashboard-btn" onclick="location.href='/admin/products'">
      Manage Products
    </button>
  </div>

  <h2>Admin Dashboard</h2>

  <div class="admin-tabs">

    <button class="tab-btn active"
            onclick="openAdminTab('usersSection', this)">
      Registered Users
    </button>

    <button class="tab-btn"
            onclick="openAdminTab('ordersSection', this)">
      Orders
    </button>

    <button class="tab-btn"
            onclick="openAdminTab('analyticsSection', this)">
      Analytics
    </button>

  </div>

  <div id="usersSection" class="admin-section">
    <div id="users"></div>
  </div>

  <div id="ordersSection" class="admin-section hidden">
    <select id="orderStatusFilter" onchange="filterOrdersByStatus()">
      <option value="All">All Orders</option>
      <option value="Pending">Pending</option>
      <option value="Approved">Approved</option>
      <option value="Out for Delivery">Out for Delivery</option>
      <option value="Delivered">Delivered</option>
      <option value="Rejected">Rejected</option>
      <option value="Cancelled">Cancelled</option>
    </select>

    <p id="orderCount" style="margin-top:10px;font-weight:500;"></p>
    <div id="adminOrders" class="admin-orders"></div>
  </div>

  <div id="analyticsSection" class="admin-section hidden">

    <div id="summaryCards" class="analytics-cards"></div>
    <hr>

    <div class="analytics-grid">
      <div class="chart-box">
        <canvas id="salesChart"></canvas>
      </div>

      <div class="chart-box">
        <canvas id="topProductsChart"></canvas>
      </div>

      <div class="chart-box pie-box">
        <canvas id="categoryChart"></canvas>
      </div>
    </div>
  </div>
</div>

<script src="/static/js/app.js"></script>
<script src="/static/js/admin.js"></script>
<script src="/static/js/admin_analytics.js"></script>

{% if session.role == "admin" %}
  {% include 'admin_footer.html' %}
{% else %}
  {% include 'footer.html' %}
{% endif %}

</body>
</html>
