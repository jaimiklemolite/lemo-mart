<!DOCTYPE html>
<html>
<head>
  <title>Manage Products – LemoMart</title>
  <link rel="stylesheet" href="/static/css/styles.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

{% include 'header.html' %}

<div class="body-content">
  <div class="admin-action">
    <div class="admin-action-buttons">
      <button class="dashboard-btn" onclick="location.href='/admin/dashboard'">
        Admin Dashboard
      </button>
    </div>
  </div>

  <h2>Admin Product Management</h2>
  <hr>
  
  <div class="admin-tabs">

    <button class="tab-btn active"
            onclick="openAdminTab('productsTab', this)">
      Products
    </button>

    <button class="tab-btn"
            onclick="openAdminTab('formTab', this)">
      Add / Edit
    </button>

    <button class="tab-btn"
            onclick="openAdminTab('categoryTab', this)">
      Categories
    </button>

  </div>


  <div id="productsTab" class="admin-section">
    <h2>Product Inventory</h2>
    <div id="products" class="product-grid"></div>
  </div>

  <div id="formTab" class="admin-section hidden">
    <h2>Create or Update Product</h2>
    <input type="hidden" id="productId">

    <input id="name" placeholder="Name">
    <input id="description" placeholder="Description">
    <input id="price" type="number" placeholder="Price">
    <input id="images" type="file" multiple accept="image/*" onchange="previewImages()">

    <select id="categorySelect" name="category_id"></select>

    <div id="imagePreview" class="image-preview"></div>

    <hr>

    <h3>Product Specifications</h3>
    <div id="specRows"></div>
    <button class="product-btn" onclick="addSpecRow()">
      + Add Spec Row
    </button>

    <h3>Product Details Sections</h3>
    <div id="detailSections"></div>
    <button class="product-btn" onclick="addDetailSection()">
      + Add Detail Section
    </button>

    <hr>

    <button onclick="addProduct()" class="product-btn">Add Product</button>
    <button onclick="updateProduct()" class="product-btn">Update Product</button>

  </div>

  <div id="categoryTab" class="admin-section hidden">
    <h2>Category Management</h2>

    <input id="category" placeholder="Category">
    <button id="categorySubmitBtn"
            onclick="submitCategory()"
            class="product-btn">
      Add Category
    </button>

    <h3>Default Specification Names</h3>
    <div id="specNameList"></div>
    <button onclick="addSpecName()" class="product-btn">
      + Add Spec Name
    </button>

    <h3>Default Detail Section Titles</h3>
    <div id="detailTitleList"></div>
    <button onclick="addDetailTitle()" class="product-btn">
      + Add Section Title
    </button>
    
    <div id="categoryInfoModal" class="modal hidden">

      <div class="modal-box">

        <div class="modal-head">
          <h3 id="infoCategoryTitle">Category</h3>
          <button onclick="closeCategoryInfo()">✕</button>
        </div>

        <div class="modal-stats">
          <div class="stat-card">
            <span>Status</span>
            <b id="infoStatus">Active</b>
          </div>

          <div class="stat-card">
            <span>Products</span>
            <b id="infoProductCount">0</b>
          </div>
        </div>

        <div class="modal-grid">

          <div class="card slider-card">
            <button class="slide-btn left" onclick="slideOrders(-1)">‹</button>

            <div class="slide-content">
              <span id="ordersLabel">Total Orders</span>
              <b id="ordersValue">0</b>
            </div>

            <button class="slide-btn right" onclick="slideOrders(1)">›</button>
          </div>

          <div class="card slider-card">
            <button class="slide-btn left" onclick="slideSales(-1)">‹</button>

            <div class="slide-content">
              <span id="salesLabel">Total Sold Qty</span>
              <b id="salesValue">0</b>
            </div>

            <button class="slide-btn right" onclick="slideSales(1)">›</button>
          </div>

          <div class="card">
            <h4>Default Specification Names</h4>
            <ul id="infoSpecList"></ul>
          </div>

          <div class="card">
            <h4>Default Detail Section Titles</h4>
            <ul id="infoDetailList"></ul>
          </div>

        </div>

      </div>
    </div>

    <div id="categoryGrid" class="category-grid"></div>

  </div>

</div>

<script src="/static/js/app.js"></script>
<script src="/static/js/categories.js"></script>

{% if session.role == "admin" %}
  {% include 'admin_footer.html' %}
{% else %}
  {% include 'footer.html' %}
{% endif %}

</body>
</html>
